<mvc:View
    controllerName="uppersap.com.prototipo.controller.Detail"
    xmlns:mvc="sap.ui.core.mvc"
    xmlns="sap.m"
    xmlns:uxap="sap.uxap"
    xmlns:layout="sap.ui.layout"
    xmlns:core="sap.ui.core">

    <uxap:ObjectPageLayout id="ObjectPageLayout" showTitleInHeaderContent="true" showHeaderContent="true">
        
        <uxap:headerTitle>
            <uxap:ObjectPageDynamicHeaderTitle>
                <uxap:expandedHeading>
                    <Title text="Numero de Orden: {datos>OrderNumber}" wrapping="true" class="sapUiSmallMarginEnd"/>
                </uxap:expandedHeading>

                <uxap:snappedHeading>
                    <Title text="Numero de Orden: {datos>OrderNumber}" wrapping="true"/>
                </uxap:snappedHeading>

                <uxap:content>
                    <Text text="{datos>LocalCenter}"/>
                </uxap:content>

                <uxap:actions>
                    <Button text="Flujo de Proceso" type="Default"/>
                    <Button text="Aprobar" type="Accept"/> <Button text="Rechazar" type="Reject"/> <Button text="Observar" type="Attention"/> <Button text="Mandar a Aprobación" type="Attention"/> <Button text="Editar" type="Emphasized"/> <Button text="Eliminar" type="Reject" icon="sap-icon://delete" press=".onDeleteOrder"/>
                </uxap:actions>
            </uxap:ObjectPageDynamicHeaderTitle>
        </uxap:headerTitle>

        <uxap:headerContent>
            <layout:HorizontalLayout allowWrapping="true">
                <layout:VerticalLayout class="sapUiMediumMarginEnd">
                    <Label text="Estado" />
                    <ObjectStatus 
                        text="{datos>StatusText}" 
                        state="{datos>StatusState}" 
                        inverted="true" 
                        class="sapUiSmallMarginBottom" 
                    />
                </layout:VerticalLayout>

                <layout:VerticalLayout class="sapUiMediumMarginEnd">
                    <Label text="Centro Local" />
                    <Text text="{datos>LocalCenter}" />
                </layout:VerticalLayout>

                <layout:VerticalLayout class="sapUiMediumMarginEnd">
                    <Label text="Fecha de Creación" />
                    <Text text="{
                        path: 'datos>Date',
                        type: 'sap.ui.model.type.Date',
                        formatOptions: {
                            pattern: 'dd/MM/yyyy',
                            source: {
                                pattern: 'yyyy-MM-dd'
                            }
                        }
                    }" />
                </layout:VerticalLayout>
            </layout:HorizontalLayout>
        </uxap:headerContent>

        <uxap:sections>
            <uxap:ObjectPageSection titleUppercase="false" title="MATERIALES">
                <uxap:subSections>
                    <uxap:ObjectPageSubSection title="Visualizacion de Materiales">
                        <uxap:blocks>
                            
                            <Table items="{datos>Materials}" inset="false">
                                <headerToolbar>
                                    <OverflowToolbar>
                                        <Title text="Visualizacion de Materiales" level="H2"/>
                                        <ToolbarSpacer/>
                                        <SearchField width="30%" placeholder="Ingrese un término de búsqueda"/>
                                        <Button text="Crear" icon="sap-icon://add" type="Transparent" press=".onOpenMaterialDialog"/>
                                    </OverflowToolbar>
                                </headerToolbar>
                                <columns>
                                    <Column><Text text="Tipo de Material"/></Column>
                                    <Column><Text text="Descripción"/></Column>
                                    <Column><Text text="Centros"/></Column>
                                    <Column><Text text="Almacenes"/></Column>
                                    <Column><Text text="Org Ventas"/></Column>
                                    <Column><Text text="Canal Dist."/></Column>
                                    <Column><Text text="UMB"/></Column>
                                    <Column><Text text="UMA"/></Column>
                                    <Column><Text text="Texto UMA"/></Column>
                                    <Column hAlign="End"><Text text="Acciones"/></Column>
                                </columns>
                                <items>
                                    <ColumnListItem>
                                        <cells>
                                            <Text text="{datos>MatType}"/>
                                            <Text text="{datos>MatDesc}"/>
                                            <Text text="{datos>MatCenter}"/>
                                            <Text text="{datos>MatStore}"/>
                                            <Text text="{datos>OrgVentas}"/>
                                            <Text text="{datos>Canal}"/>
                                            <Text text="{datos>UMB}"/>
                                            <Text text="{datos>UMA}"/>
                                            <Text text="{datos>TextoUMA}"/>
                                            <HBox justifyContent="End">
                                                <Button icon="sap-icon://edit" type="Transparent" press=".onOpenMaterialDialog">
                                                    <customData>
                                                        <core:CustomData key="action" value="edit" />
                                                    </customData>
                                                </Button>
                                                <Button icon="sap-icon://delete" type="Reject" press=".onDeleteMaterial"/>
                                            </HBox>
                                        </cells>
                                    </ColumnListItem>
                                </items>
                            </Table>

                        </uxap:blocks>
                    </uxap:ObjectPageSubSection>
                </uxap:subSections>
            </uxap:ObjectPageSection>
        </uxap:sections>
    </uxap:ObjectPageLayout>
</mvc:View>